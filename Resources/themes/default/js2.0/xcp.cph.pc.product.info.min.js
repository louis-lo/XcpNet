/*!
 *pc端产品详情页面操作脚本
 * Requires jQuery v1.7 or later
 * Created by liu mixoaxin on 2016-08-10
 */
+function(n){"use strict";var t=function(t){var o=!1,s=!1,h=!1,c=!1,l=!1,r=0,u=0,f=0,e=0,a=function(){var i=Cnaws.getUrl("/comment/Statistics/1/"+t.productId);n.get(i,function(t){t.code===-200&&(n("span.jsRate").text(t.data.rate3),n("span.jsRate1").text(t.data.rate1),n("span.jsRate2").text(t.data.rate2),n("span.jsRate3").text(t.data.rate3),n("#rate1").css("width",t.data.rate1+"%"),n("#rate2").css("width",t.data.rate2+"%"),n("#rate3").css("width",t.data.rate3+"%"),n("em.jsStar1").text(t.data.star1),n("em.jsStar2").text(t.data.star2),n("em.jsStar3").text(t.data.star3),n("em.jsStar4").text(t.data.star4))},"json")},v=function(){var i=Cnaws.getUrl("/comment/count/1/"+t.productId);n.get(i,function(t){t.code===-200&&n(".jsCommentCount").text(t.data)},"json")},i=function(i,o){var s=Cnaws.getUrl("/comment/list/1/"+t.productId+"/"+r+"/"+u+"/"+f+"/"+i);n.get(s,function(t){n("#comment"+e).empty().html(t);n.isFunction(o)&&o()},"html")};window.getComment=function(n){Cnaws.showInfo("请稍后...");i(n)};n("#plusBtnContainer").plusMinusBtn({max:t.inventory,plus:"#btnPlus",num:"#number",minus:"#btnMinus",onChange:function(t){n("a.btnCart").data("count",t.number.value)}});n("#btnBuy").click(function(){var t=new Cnaws.Cart,i=n('input[name="Id"]').val(),r=n('input[name="Count"]').val();t.buy(i,r)});n("#mynav").navfix(0,1025);n("ul.ul-tab").find("li").each(function(){n(this).mouseover(function(){n(this).css("color","#e31939")}).mouseout(function(){n(this).css("color","")}).click(function(){var t=n(this),a;e=t.parent().find("li").index(this);t.removeClass().addClass("current");a=t.parent().parent().parent().find(".tab-con>#comment"+e);a.show();a.siblings().hide();t.siblings().removeClass();switch(e){case 0:r=0;u=0;f=0;o||(Cnaws.showInfo("请稍后..."),i(1,function(){o=!0}));break;case 1:r=2;u=0;f=0;l||(Cnaws.showInfo("请稍后..."),l||i(1,function(){l=!0}));break;case 2:r=1;u=4;f=6;c||(Cnaws.showInfo("请稍后..."),c||i(1,function(){c=!0}));break;case 3:r=1;u=2;f=4;h||(Cnaws.showInfo("请稍后..."),h||i(1,function(){h=!0}));break;case 4:r=1;u=0;f=2;s||(Cnaws.showInfo("请稍后..."),s||i(1,function(){s=!0}))}})});n(".yScrollListTitle h1").click(function(){var t=n(this).index(".yScrollListTitle h1");n(this).addClass("yth1click").siblings().removeClass("yth1click");n(n(".yScrollListInList")[t]).show().siblings().hide()});v();a();i(1,function(){o=!0})};window.product=t}($,document);