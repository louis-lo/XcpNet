+function(){var n=typeof n!="undefined"?n:function(n){return n+".html"},i="/country/",r={},t=[],u=function(u,f,e){function o(n,t,i){n&&(this.selectContainer=u("#"+n),this.selectContent=this.selectContainer.find(".city_content"),this.areaName=this.selectContainer.find(".area_name"),this.areaTitle=this.selectContainer.find(".area_title"),this.area_list=this.selectContainer.find(".area_list"),this.loadedHot=!1,this.loadedProvince=!1,this.currentArea={},this.o=t||{},this._fun=i||function(){},this.hasHot=this.o.hasHot||!1,this.hideCounty=this.o.hideCounty||!1,this.init())}return o.prototype={init:function(){this.bindEvents();this.tabChange();this.createHideIpt()},bindEvents:function(){var i=this.selectContainer,s=this.selectContent,n=this,t=this.currentArea,o=this.o,r;o&&o.hideName&&o.hideName;r=this.areaTitle.is('input[type="text"]');this.areaName.on("click",function(t){1==s.is(":visible")?n.hidePanel():(n.hasHot&&n.showHotCitys(f),n.showProvince(e),n.showPanel(),n.o.showFun&&n.o.showFun(),n.selectCurrentItem());t.stopPropagation()});this.selectContainer.on("click",".items a",function(f){var e=u(this),h=e.attr("data-origin"),o=n.areaTitle,s=e.attr("data-id"),c;"hot"==h?(r?o.val(e.text()):o.text(e.text()),i.find('[data-target="city"]').val(s),n.hidePanel()):"p"==h?(t.p=e.text(),i.find('[data-target="province"]').val(s),i.find('[data-target="city"]').val(""),i.find('[data-target="county"]').val(""),n.tabItem("city_list"),r?o.val(t.p):o.text(t.p),n.showCity(s,"city_list","c")):"c"==h?(t.c=e.text(),r?o.val(t.p+" "+t.c):o.text(t.p+"-"+t.c),i.find('[data-target="city"]').val(s),1==n.hideCounty?n.hidePanel():(n.tabItem("county_list"),n.showCity(s,"county_list","t"))):"t"==h&&(t.t=e.text(),i.find('[data-target="county"]').val(s),c=t.p+"-"+t.c+"-"+t.t,t.p==t.c&&(c=t.p+"-"+t.t),r?o.val(c.replace(/\//g," ")):o.text(c),n.hidePanel(),n.Fun());n.o.clickItemFun&&n.o.clickItemFun(e);f.stopPropagation()});this.selectContainer.on("click",function(t){n.showPanel();t.stopPropagation()});u(document.body).on("click",function(){n.hidePanel()})},showPanel:function(){this.selectContent.show();this.areaName.addClass("open")},hidePanel:function(){},Fun:function(){this._fun()},showHotCitys:function(n){var r;if(this.loadedHot===!1){this.area_list.hide();for(var u=this.selectContainer.find(".hot_city"),t='<ul class="items clear">',i=0,f=n.length;f>i;i++)r=n[i],t+='<li><a href="javascript:;" data-origin="hot" data-id='+r[0]+">"+r[1]+"<\/a><\/li>";t+="<\/ul>";u.html(t).show();this.loadedHot=!0}},showProvince:function(){var r,t;this.loadedProvince===!1&&(r=this.selectContainer.find(".province_list"),this.area_list.hide(),t='<ul class="items clear">',$.ajax({type:"GET",url:n(i+"provinces"),dataType:"json",async:!1,success:function(n){if(n.code==-200&&n.data.length>0)for(var i=0;i<n.data.length;i++)t+='<li><a href="javascript:;" data-origin="p" data-id='+n.data[i].id+">"+n.data[i].sname+"<\/a><\/li>"}}),t+="<\/ul>",r.html(t).show(),this.loadedProvince=!0)},showCity:function(r,u,f){var s;if(r!=0){s=t;this.area_list.hide();var h=this.selectContainer.find("."+u),e='<ul class="items clear">',o="";f=="c"?o=n(i+"cities/"+r):f=="t"&&(o=n(i+"counties/"+r));$.ajax({type:"GET",url:o,dataType:"json",async:!1,success:function(n){if(n.code==-200&&n.data.length>0)for(var t=0;t<n.data.length;t++)e+='<li><a href="javascript:;" data-origin='+f+" data-id="+n.data[t].id+">"+n.data[t].sname+"<\/a><\/li>"}});e+="<\/ul>";h.html(e).show()}else k.hidePanel()},tabChange:function(){var t=this.selectContainer,n=this;t.on("click","[data-to]",function(){var i=u(this),t=i.attr("data-to");"province_list"==t&&n.showProvince(e);n.tabItem(t)})},tabItem:function(n){var t=this.selectContainer;t.find("[data-to]").removeClass("current");t.find(".area_list").hide();t.find("[data-to="+n+"]").addClass("current");t.find("."+n).show()},selectCurrentItem:function(){var n=(this.areaTitle,this.selectContainer),t;n.find("[data-id]").removeClass("current");var r=n.find('[data-target="province"]').val(),i=n.find('[data-target="city"]').val(),u=n.find('[data-target="county"]').val();i&&(t=n.find(".hot_city"),t.find("[data-id="+i+"]").addClass("current"),n.find(".city_list").find("[data-id="+i+"]").addClass("current"));r&&(t=n.find(".province_list"),t.find("[data-id="+r+"]").addClass("current"));u&&(t=n.find(".county_list"),t.find("[data-id="+u+"]").addClass("current"))},createHideIpt:function(){var t=this.o,n=t&&t.hideName?t.hideName:{};var i=(n.hotcityName,n.provinceName),r=n.cityName,u=n.countyName,f=this.selectContainer.attr("data-pid"),e=this.selectContainer.attr("data-cid"),o=this.selectContainer.attr("data-tid");this.selectContainer.append('<input type="hidden" data-target="province"  name='+(i||"provinceName")+" id="+(i||"provinceName")+" value="+(f||"")+">");this.selectContainer.append('<input type="hidden" data-target="city" id='+(r||"cityName")+" name="+(r||"cityName")+" value="+(e||"")+">");1!=this.hideCounty&&this.selectContainer.append('<input type="hidden" data-target="county" id='+(u||"countyName")+" name="+(u||"countyName")+" value="+(o||"")+">")},getProNameByCode:function(n){var f;if(!n)return"";n+="";for(f in r)for(var i=r[f],t=0,e=i.length;e>t;t++)if(u.trim(n)==i[t],[0])return i[t],[1];return""},getCityNameByCode:function(n){var i,u,r;if(!n)return"";for(n+="",i=0,u=t.length;u>i;i++)if(r=t[i],n==r[0])return r[1];return""}},o}(jQuery,[],r,t);window.areaSelectChange=u}();